// Generated by CoffeeScript 1.4.0
(function() {
  window.check_status = function() {
    return $.getJSON("/now_playing.json", function(data, status, jqxhr) {
      if (data.status === "PLAYING") {
        $(".now-playing").show();
        return $(".now-playing h3").html(data.current_music);
      } else {
        return $(".now-playing").hide();
      }
    });
  };

  $(function() {
    window.setInterval(window.check_status, 10000);
    return $(document).on("click", ".add-link", function(e) {
      e.preventDefault();
      $.getJSON($(this).attr("href"), function(data, status, jqxhr) {
        if (data.status === "ok") {
          return history.back();
        } else {
          return alert("Aconteceu um erro inesperado!");
        }
      });
      return false;
    });
  });

}).call(this);
