// Generated by CoffeeScript 1.4.0
(function() {

  window.check_status = function() {
    return $.getJSON("/api/v1/now_playing", function(data, status, jqxhr) {
      if (data.status === "PLAYING") {
        $(".now-playing").show();
        return $(".now-playing h3").html(data.current_music);
      } else {
        return $(".now-playing").hide();
      }
    });
  };

  $(function() {
    window.setInterval(window.check_status, 10000);
    return $(document).on("click", ".add-link", function(e) {
      e.preventDefault();
      $.post("/api/v1/playlist", {
        path: $(this).attr("data-path")
      }, function(data) {
        if (data.status === "ok") {
          return history.back();
        } else {
          return alert("Aconteceu um erro inesperado!");
        }
      }, "json");
      return false;
    });
  });

}).call(this);
